<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>js_day05ex02_2</title>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.6/underscore-min.js"
      integrity="sha512-2V49R8ndaagCOnwmj8QnbT1Gz/rie17UouD9Re5WxbzRVUGoftCu5IuqqtAM9+UC3fwfHCSJR1hkzNQh/2wdtg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
  </head>
  <body>
    <h1>js_day05ex02_2</h1>
    <div id="demo">Ajax기술로 saram_data.json파일의 내용을 로드한다.</div>
    <p><button id="loadBtn">Load Button</button></p>

    <script>
      var demo = document.getElementById("demo");
      var loadBtn = document.getElementById("loadBtn");

      loadBtn.addEventListener("click", (event) => {
        // xhr을 이용해서 Ajax 처리
        const xhr = new XMLHttpRequest();
        // const xhttp = new XMLHttpRequest();
        // 요청 결과 전송 후 처리하는 이벤트 핸들러
        xhr.onload = (event) => {
          let resTxt = xhr.responseText;
          // console.log(resTxt);
          let jsonData = JSON.parse(resTxt);
          // console.log(jsonData);
          let saramList = jsonData["saramList"];
          console.log(saramList);
        };
        // 요청 페이지 설정
        xhr.open("GET", "/js/saram_data.json", true); // true 비동기(병렬, ajax), false 동기,

        // 실행
        xhr.send();
      });
    </script>
  </body>
</html>
